<div class="row">
    <div class="col-12">
        <div>
          <div style="margin-bottom: 1%;">
            <button mat-flat-button
                    (click)="StartRecord()"
                    *ngIf="isRecorded"
                    [ngClass]="isStopRecord ? ['fa-stop']:['fa-record-vinyl red']">
              Start record</button>
            <button mat-flat-button
                    (click)="enableOrDisableAudio()"
                    [ngClass]="enableAudio ? ['fa-microphone']:['fa-microphone-slash']">
              Microphone</button>
            <button mat-flat-button
                    (click)="enableOrDisableVideo()"
                    [ngClass]="enableVideo ? ['fa-video']:['fa-video-slash']">
              Video</button>
            <button mat-flat-button
                    [disabled]="!enableShareScreen"
                    (click)="shareScreen()">
              Share screen</button>
          </div>
        </div>
    </div>
</div>

<mat-grid-list cols="3" rowHeight="600px">
    <!-- local video of current user -->
    <mat-grid-tile
        [colspan]="2">
        <div class="row mt-1 justify-content-center">
          <video #videoPlayer [muted]="true" width="100%" height="40%"></video>
        </div>
    </mat-grid-tile>
    <!-- text chat -->
    <mat-grid-tile
        [colspan]="1">
        <text-chat></text-chat>
    </mat-grid-tile>
</mat-grid-list>


<div class="row mt-1">
    <div class="col-md-7">
        <div [ngSwitch]="statusScreen">
            <!-- the same view can be shown in more than one case -->
            <!-- SHARESCREEN -->
            <div style="position: relative;" id="share-screen" *ngSwitchCase="'SHARESCREEN'">
                <video [srcObject]="shareScreenStream" (loadedmetadata)="onLoadedMetadata($event)" muted></video>
                <span class="label badge bg-danger" *ngIf="userIsSharing">{{userIsSharing}}</span>
            </div>
        </div>
    </div>
    <div class="col-md-5">
        <div style="height: 100%;">
            <tabset>
                <tab (selectTab)="onSelect($event)">
                    <ng-template tabHeading>
                        <span class="badge badge-secondary bg-secondary" *ngIf="videos.length > maxUserDisplay">{{videos.length}}</span>
                    </ng-template>

                    <div class="row" style="max-height: 430px; overflow-y: scroll;">
                        <div class="col-6" *ngFor="let user of tempvideos">
                            <app-video-box-user [userVideo]="user"></app-video-box-user>
                        </div>

                        <div class="col-12" *ngIf="videos.length > maxUserDisplay">
                            <div class="text-center">
                                <div class="box text-secondary" style="font-size: x-large;"> +{{videos.length - maxUserDisplay}}</div>
                            </div>
                        </div>
                    </div>
                </tab>
            </tabset>
        </div>
    </div>
</div>
